#:kivy 1.11.1
#:import hex kivy.utils.get_color_from_hex

<MainMenuScreen@CScreen>:
    idn: 'mm_screen'
    id: mm_screen
    on_touch_up: self.callbacks['switch']('selection')
    canvas:
        Color:
            rgba: hex("#d9d9d9")
        Rectangle:
            size: self.size
            pos: self.pos
    CFlay:
        idn: 'mm_flay'
        CLabel:
            id: tlab
            idn: 'mm_title'
            pos_hint: {'center_x':.5, 'center_y': .5}
            size_hint: 1, .5
            text: 'Piano Teacher'
            font_size: self.header_size * 2
            font_name: './UI/resources/font.ttf'
            color: hex('#4c4d4c')

<SelectionScreen@CScreen>:
    idn: 's_screen'
    id: s_screen
    canvas:
        Color:
            rgba: hex("#d9d9d9")
        Rectangle:
            size: self.size
            pos: self.pos
    CFlay:
        idn: 's_flay'


        SongSelector:
            id: ss
            size_hint: 1, 1
            callbacks: s_screen.callbacks
            pos_hint: {'center_x':.5, 'center_y':.5}
            CButton:
                background_normal: ''
                background_color: hex('#8078818a')
                id: next_song
                idn: 'next_song'
                size_hint: .2, .125
                pos_hint: {'center_x': .75, 'center_y':.1}
                text: 'Next'
                font_name: './UI/resources/font.ttf'
                font_size: 40
                color: hex('#535659')
                on_release: ss.inc_song(1)
                
                
        
            CButton:
                background_normal: ''
                background_color: hex('#8078818a')
                id: last_song
                idn: 'last_song'
                size_hint: .2, .125
                pos_hint: {'center_x': .25, 'center_y':.1}
                text: 'Last'
                font_name: './UI/resources/font.ttf'
                font_size: 40
                color: hex('#535659')
                on_release: ss.inc_song(-1)
            
            CButton:
                background_normal: ''
                background_color: hex('#8078818a')
                id: select
                idn: 'select_song'
                size_hint: .2, .125
                pos_hint: {'center_x': .5, 'center_y':.1}
                text: 'Select'
                font_name: './UI/resources/font.ttf'
                font_size: 40
                color: hex('#535659')
                on_release: ss.select_callback()

<GameScreen@CScreen>:
    idn: 'g_screen'
    id: g_screen
    canvas:
        Color:
            rgba: hex("#d9d9d9")
        Rectangle:
            size: self.size
            pos: self.pos
    CFlay:
        idn: 'g_flay'
        CFlay:
            size_hint: .5, .4
            pos_hint: {'center_x':.5, 'center_y':.5}
            id: now_playing
            CLabel:
                size_hint: .6, .5
                pos_hint: {'x':.4225, 'center_y':.6}
                text: g_screen.s_title
                font_size: self.parent.width / g_screen.get_den(True)
                font_name: './UI/resources/font.ttf'
                color: hex('#4c4d4c')
            CLabel:
                size_hint: .6, .5
                pos_hint: {'x':.4225, 'center_y':.40}
                text: g_screen.s_artist
                font_size: self.parent.width / g_screen.get_den(False)
                font_name: './UI/resources/font.ttf'
                color: hex('#4c4d4c')
            Image:
                size_hint: (now_playing.height - 20) / now_playing.height, (now_playing.height - 20) / now_playing.height 
                pos_hint: {'center_x':(now_playing.height - 20) / (now_playing.height * 2) - .25, 'center_y':.5}
                pos_x: 0
                source: g_screen.s_tpath

        CButton:
            idn: 'BackButton'
            id: back_button
            text: 'Back'
            size_hint: .15, .1
            pos_hint: {'x':0.03, 'y':0.85}
            on_release: g_screen.callbacks['switch']('selection')

<WidgetManager>:
    id: wmanager

